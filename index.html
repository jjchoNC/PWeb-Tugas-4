<!doctype html>
<html lang="en">

<head>
    <title>Title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS v5.2.1 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <link href="style.css" rel="stylesheet">
    <script>
        function createCard(title, temperature, humidity, windSpeed, windDirection, weather) {
            var date = new Date(title.slice(4,6) + " / " + title.slice(6, 8) + " / " + title.slice(0,4) + " " + title.slice(8,10) + ":" + title.slice(10,12) + " UTC")
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: "numeric", minute: "numeric" };
            return `
            <div class="col-md-3">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Kota Surabaya</h5>
                        <p class="card-text">
                            Waktu : ${date.toLocaleDateString('id-ID', options)}<br>
                            Temperature : ${temperature}&deg;C<br>
                            Humidity : ${humidity}%<br>
                            Wind speed : ${windSpeed} kph (${windDirection}&deg)<br>
                        </p>
                    </div>
                </div>
            </div>
                    `;
        }
        function loadXMLDoc() {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    var isiHTML = ``;
                    var xmlDoc = this.responseXML;
                    var temp = xmlDoc.getElementsByTagName("area")[34].getElementsByTagName("parameter")[5];
                    var humidity = xmlDoc.getElementsByTagName("area")[34].getElementsByTagName("parameter")[0];
                    var windSpeed = xmlDoc.getElementsByTagName("area")[34].getElementsByTagName("parameter")[8];
                    var windDirection = xmlDoc.getElementsByTagName("area")[34].getElementsByTagName("parameter")[7];   
                    var weather = xmlDoc.getElementsByTagName("area")[34].getElementsByTagName("parameter")[6];
                    for (let index = 0; index < 11; index++) {
                        isiHTML += createCard(temp.getElementsByTagName("timerange")[index].getAttribute("datetime"), 
                                              temp.getElementsByTagName("timerange")[index].getElementsByTagName("value")[0].textContent, 
                                              humidity.getElementsByTagName("timerange")[index].getElementsByTagName("value")[0].textContent,
                                              windSpeed.getElementsByTagName("timerange")[index].getElementsByTagName("value")[2].textContent,
                                              windDirection.getElementsByTagName("timerange")[index].getElementsByTagName("value")[0].textContent,
                                              weather.getElementsByTagName("timerange")[index].getElementsByTagName("value").textContent
                                             )
                    }
                    document.getElementById("hasil").innerHTML = isiHTML;
                }
            };
            xhttp.open("GET", "https://data.bmkg.go.id/DataMKG/MEWS/DigitalForecast/DigitalForecast-JawaTimur.xml", true);
            xhttp.send();
        }
        loadXMLDoc();
    </script>

</head>

<body>
    <header>
        <!-- place navbar here -->
    </header>
    <main id="hasil">
    </main>
    <footer>
        <!-- place footer here -->
    </footer>
    <!-- Bootstrap JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous">
        </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js"
        integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz" crossorigin="anonymous">
        </script>
</body>

</html>